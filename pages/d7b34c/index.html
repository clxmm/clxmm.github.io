<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>14布隆过滤器BloomFilter | clxmm</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/icon.jpeg">
    <meta name="description" content="111">
    <meta name="keywords" content="clxmm">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.91c54501.css" as="style"><link rel="preload" href="/assets/js/app.bb793d44.js" as="script"><link rel="preload" href="/assets/js/2.c9184447.js" as="script"><link rel="preload" href="/assets/js/3.b86c239d.js" as="script"><link rel="preload" href="/assets/js/24.98b533de.js" as="script"><link rel="prefetch" href="/assets/js/10.3bb44866.js"><link rel="prefetch" href="/assets/js/11.f29116e0.js"><link rel="prefetch" href="/assets/js/12.eaa80fe1.js"><link rel="prefetch" href="/assets/js/13.607f8a97.js"><link rel="prefetch" href="/assets/js/14.715b1c48.js"><link rel="prefetch" href="/assets/js/15.71d2dbc1.js"><link rel="prefetch" href="/assets/js/16.b263764f.js"><link rel="prefetch" href="/assets/js/17.7201f4e6.js"><link rel="prefetch" href="/assets/js/18.94bf12e5.js"><link rel="prefetch" href="/assets/js/19.416a156a.js"><link rel="prefetch" href="/assets/js/20.33931d01.js"><link rel="prefetch" href="/assets/js/21.8e58e1f5.js"><link rel="prefetch" href="/assets/js/22.e5a8bb91.js"><link rel="prefetch" href="/assets/js/23.b24b112f.js"><link rel="prefetch" href="/assets/js/25.0bc0ae20.js"><link rel="prefetch" href="/assets/js/26.2c564d65.js"><link rel="prefetch" href="/assets/js/27.b6958cda.js"><link rel="prefetch" href="/assets/js/28.3b427f4d.js"><link rel="prefetch" href="/assets/js/29.86f67f48.js"><link rel="prefetch" href="/assets/js/30.c88df1af.js"><link rel="prefetch" href="/assets/js/31.0374d8b8.js"><link rel="prefetch" href="/assets/js/32.712e7c25.js"><link rel="prefetch" href="/assets/js/33.fc768e49.js"><link rel="prefetch" href="/assets/js/34.394933a2.js"><link rel="prefetch" href="/assets/js/35.217317d5.js"><link rel="prefetch" href="/assets/js/36.51425364.js"><link rel="prefetch" href="/assets/js/37.7acaebd0.js"><link rel="prefetch" href="/assets/js/38.d32a4338.js"><link rel="prefetch" href="/assets/js/4.7ab980a6.js"><link rel="prefetch" href="/assets/js/5.2e4cbb9e.js"><link rel="prefetch" href="/assets/js/6.7b582dbb.js"><link rel="prefetch" href="/assets/js/7.ac6d362f.js"><link rel="prefetch" href="/assets/js/8.e1180ebd.js"><link rel="prefetch" href="/assets/js/9.058f530e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.91c54501.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">clxmm</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端学习" class="dropdown-title"><a href="/java/" class="link-title">后端学习</a> <span class="title" style="display:none;">后端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>01redis学习</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/356b54/" class="nav-link">01redis开始</a></li></ul></li><li class="dropdown-item"><h4>02redis学习</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/356b51/" class="nav-link">01redis开始</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><a href="/web/" class="link-title">前端学习</a> <span class="title" style="display:none;">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>vue2学习</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7f2831/" class="nav-link">01vue学习</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>centos安装zsh</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/435ca7/" class="nav-link">centos安装zsh</a></li></ul></li></ul></div></div> <a href="https://github.com/clxmm/clxmm" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端学习" class="dropdown-title"><a href="/java/" class="link-title">后端学习</a> <span class="title" style="display:none;">后端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>01redis学习</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/356b54/" class="nav-link">01redis开始</a></li></ul></li><li class="dropdown-item"><h4>02redis学习</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/356b51/" class="nav-link">01redis开始</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><a href="/web/" class="link-title">前端学习</a> <span class="title" style="display:none;">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>vue2学习</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/7f2831/" class="nav-link">01vue学习</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><a href="/other/" class="link-title">其他</a> <span class="title" style="display:none;">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>centos安装zsh</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/435ca7/" class="nav-link">centos安装zsh</a></li></ul></li></ul></div></div> <a href="https://github.com/clxmm/clxmm" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>redis</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/356b54/" class="sidebar-link">01redis</a></li><li><a href="/pages/2a37ab/" class="sidebar-link">02redis持久化</a></li><li><a href="/pages/f01e54/" class="sidebar-link">03redis事务和管道</a></li><li><a href="/pages/75cece/" class="sidebar-link">04redis发布与订阅</a></li><li><a href="/pages/4a54cc/" class="sidebar-link">05Redis复制(replica)</a></li><li><a href="/pages/9788da/" class="sidebar-link">06Redis哨兵(sentinel)</a></li><li><a href="/pages/551b67/" class="sidebar-link">07Redis集群(cluster)</a></li><li><a href="/pages/ebe3c7/" class="sidebar-link">08redis与SpringBoot集成</a></li><li><a href="/pages/fa5943/" class="sidebar-link">redis单线程与多线程</a></li><li><a href="/pages/ec796f/" class="sidebar-link">redis的BigKey</a></li><li><a href="/pages/e53d85/" class="sidebar-link">redis缓存双写一致性</a></li><li><a href="/pages/a32a66/" class="sidebar-link">12redis与mysql双写一致性</a></li><li><a href="/pages/8249db/" class="sidebar-link">13案列bitmap-hyperlog-geo</a></li><li><a href="/pages/d7b34c/" aria-current="page" class="active sidebar-link">14布隆过滤器BloomFilter</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/d7b34c/#_1-面试题" class="sidebar-link">1.面试题</a></li><li class="sidebar-sub-header level2"><a href="/pages/d7b34c/#_2-是什么" class="sidebar-link">2.是什么</a></li><li class="sidebar-sub-header level2"><a href="/pages/d7b34c/#_3-能干什么" class="sidebar-link">3.能干什么</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d7b34c/#_3-1-重点" class="sidebar-link">3.1 重点</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d7b34c/#_4-布隆过滤器原理" class="sidebar-link">4. 布隆过滤器原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d7b34c/#_4-1-布隆过滤器实现原理和数据结构" class="sidebar-link">4.1 布隆过滤器实现原理和数据结构</a></li><li class="sidebar-sub-header level3"><a href="/pages/d7b34c/#_4-2-使用步骤" class="sidebar-link">4.2 使用步骤</a></li><li class="sidebar-sub-header level3"><a href="/pages/d7b34c/#_4-3-布隆过滤器误判率-为什么不要删除" class="sidebar-link">4.3 布隆过滤器误判率，为什么不要删除</a></li><li class="sidebar-sub-header level3"><a href="/pages/d7b34c/#_4-4-总结" class="sidebar-link">4.4 总结</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d7b34c/#_5-布隆过滤器的使用场景" class="sidebar-link">5.布隆过滤器的使用场景</a></li><li class="sidebar-sub-header level2"><a href="/pages/d7b34c/#_6-尝试手写布隆过滤器" class="sidebar-link">6.尝试手写布隆过滤器，</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/d7b34c/#_6-1-整体架构" class="sidebar-link">6.1 整体架构</a></li><li class="sidebar-sub-header level3"><a href="/pages/d7b34c/#_6-2-设计步骤" class="sidebar-link">6.2 设计步骤</a></li><li class="sidebar-sub-header level3"><a href="/pages/d7b34c/#_6-3关键代码" class="sidebar-link">6.3关键代码</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/d7b34c/#_7-布隆过滤器优缺点" class="sidebar-link">7.布隆过滤器优缺点</a></li></ul></li><li><a href="/pages/cdc2c8/" class="sidebar-link">缓存预热、雪崩、击穿、穿透</a></li><li><a href="/pages/6b15da/" class="sidebar-link">redis的分布式锁</a></li><li><a href="/pages/6be928/" class="sidebar-link">17Redlock算法和缓存淘汰</a></li><li><a href="/pages/086c39/" class="sidebar-link">18Redis源码</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>redis02</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06970110><div class="articleInfo" data-v-06970110><ul class="breadcrumbs" data-v-06970110><li data-v-06970110><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06970110></a></li> <li data-v-06970110><a href="/java/#后端学习" data-v-06970110>后端学习</a></li><li data-v-06970110><a href="/java/#redis" data-v-06970110>redis</a></li></ul> <div class="info" data-v-06970110><div title="作者" class="author iconfont icon-touxiang" data-v-06970110><a href="https://github.com/clxmm" target="_blank" title="作者" class="beLink" data-v-06970110>clxmm</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06970110><a href="javascript:;" data-v-06970110>2024-09-18</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><!---->14布隆过滤器BloomFilter<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="_1-面试题"><a href="#_1-面试题" class="header-anchor">#</a> 1.面试题</h2> <ul><li>现有50亿个电话号码，现有10万个电话号码，如何要快速准确的判断这些电话号码是否已经存在</li> <li>判断是否存在，布隆过滤器了解过吗？</li> <li>安全连接网址，全球数10亿的网址判断</li> <li>黑名单校验，识别垃圾邮件</li> <li>白名单校验，识别出合法用户进行后续处理</li></ul> <h2 id="_2-是什么"><a href="#_2-是什么" class="header-anchor">#</a> 2.是什么</h2> <p>由一个初值都为零的bit数组和多个哈希函数构成，用来快速判断集合中是否存在某个元素</p> <ul><li>设计思想</li> <li>本质就是判断具体数据是否存在于一个大的集合中</li></ul> <p>布隆过滤器是一种<strong>类似set的</strong>数据结构，只是<strong>统计结果在巨量数据下有点小瑕疵，不够完美</strong></p> <p><strong>备注</strong></p> <p>布隆过滤器（英语：Bloom Filter）是 1970 年由布隆提出的。</p> <p>它实际上是一个很长的二进制数组(00000000)+一系列随机hash算法映射函数，主要用于判断一个元素是否在集合中。</p> <p>通常我们会遇到很多要判断一个元素是否在某个集合中的业务场景，一般想到的是将集合中所有元素保存起来，然后通过比较确定。</p> <p>链表、树、哈希表等等数据结构都是这种思路。但是随着集合中元素的增加，我们需要的存储空间也会呈现线性增长，最终达到瓶颈。同时检索速度也越来越慢，上述三种结构的检索时间复杂度分别为O(n),O(logn),O(1)。这个时候，布隆过滤器（Bloom Filter）就应运而生</p> <p><img src="https://cdn.jsdelivr.net/gh/clxmm/image/img/2024/09/redis202409232130173.png" alt=""></p> <h2 id="_3-能干什么"><a href="#_3-能干什么" class="header-anchor">#</a> 3.能干什么</h2> <p>高效地插入和查询，占用空间少，返回的结果是不确定性+不够完美。</p> <img src="https://cdn.jsdelivr.net/gh/clxmm/image/img/2024/09/redis202409232131396.png" style="zoom:80%;"> <ul><li>减少内存占用</li> <li>不保存数据信息，只是在内存中做一个是否存在的标记flag</li></ul> <h3 id="_3-1-重点"><a href="#_3-1-重点" class="header-anchor">#</a> 3.1 重点</h3> <p>一个元素如果判断结果：存在时，元素不一定存在，但是判断结果为不存在时，则一定不存在。</p> <p>布隆过滤器可以添加元素，但是**不能删除元素，**由于涉及hashcode判断依据，删掉元素会导致误判率增加。</p> <p><strong>总结</strong></p> <ul><li>有，是可能有</li> <li>无，是肯定无。可以保证的是，如果布隆过滤器判断一个元素不在一个集合中，那这个元素一定不会在集合中</li></ul> <h2 id="_4-布隆过滤器原理"><a href="#_4-布隆过滤器原理" class="header-anchor">#</a> 4. 布隆过滤器原理</h2> <h3 id="_4-1-布隆过滤器实现原理和数据结构"><a href="#_4-1-布隆过滤器实现原理和数据结构" class="header-anchor">#</a> 4.1 布隆过滤器实现原理和数据结构</h3> <ul><li><p>布隆过滤器原理</p> <p>布隆过滤器(Bloom Filter) 是一种专门用来解决去重问题的高级数据结构。实质就是一个大型***位数组***和几个不同的无偏hash函数(无偏表示分布均匀)。由一个初值都为零的bit数组和多个个哈希函数构成，用来快速判断某个数据是否存在。但是跟 HyperLogLog 一样，它也一样有那么一点点不精确，也存在一定的误判概率</p> <img src="https://cdn.jsdelivr.net/gh/clxmm/image/img/2024/09/redis202409232131396.png" style="zoom:80%;"></li> <li><p>添加key、查询key</p> <ul><li><p>添加key时</p> <p>使用多个hash函数对key进行hash运算得到一个整数索引值，对位数组长度进行取模运算得到一个位置，每个hash函数都会得到一个不同的位置，将这几个位置都置1就完成了add操作。</p></li> <li><p>查询key时</p> <p>只要有其中一位是零就表示这个key不存在，但如果都是1，则不一定存在对应的key。</p> <p>结论：<strong>有，是可能有，无，是肯定无</strong></p></li></ul></li> <li><p>hash冲突导致数据不精准</p> <p>当有变量被加入集合时，通过N个映射函数将这个变量映射成位图中的N个点，把它们置为 1（假定有两个变量都通过 3 个映射函数）。</p> <p><img src="https://cdn.jsdelivr.net/gh/clxmm/image/img/2024/09/redis202409232149890.png" alt=""></p> <p>查询某个变量的时候我们只要看看这些点是不是都是 1， 就可以大概率知道集合中有没有它了，如果这些点，**有任何一个为零则被查询变量一定不在，**如果都是 1，则被查询变量很可能存在，为什么说是可能存在，而不是一定存在呢？那是因为映射函数本身就是散列函数，散列函数是会有碰撞的。（见上图3号坑两个对象都1）</p> <p><img src="https://cdn.jsdelivr.net/gh/clxmm/image/img/2024/09/redis202409232151754.png" alt=""></p></li> <li><p>hash冲突导致数据不精准2</p> <ul><li><p>哈希函数</p> <p>哈希函数的概念是：将任意大小的输入数据转换成特定大小的输出数据的函数，转换后的数据称为哈希值或哈希编码，也叫散列值</p> <p><img src="https://cdn.jsdelivr.net/gh/clxmm/image/img/2024/09/redis202409232152379.png" alt=""></p> <p>如果两个散列值是不相同的（根据同一函数）那么这两个散列值的原始输入也是不相同的。</p> <p>这个特性是散列函数具有确定性的结果，具有这种性质的散列函数称为单向散列函数。</p> <p>散列函数的输入和输出不是唯一对应关系的，<strong>如果两个散列值相同，两个输入值很可能是相同的，但也可能不同，这种情况称为“散列碰撞（collision）”。</strong></p> <p>用 hash表存储大数据量时，空间效率还是很低，当只有一个 hash 函数时，还很容易发生哈希碰撞。</p></li> <li><p>Java中hash冲突java案例</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HashCodeConflictDemo</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> hashCodeSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span><span class="token number">200000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> hashCode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>hashCodeSet<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>hashCode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;出现了重复的hashcode: &quot;</span><span class="token operator">+</span>hashCode<span class="token operator">+</span><span class="token string">&quot;\t 运行到&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            hashCodeSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>hashCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

 

<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Aa&quot;</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;BB&quot;</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;柳柴&quot;</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;柴柕&quot;</span><span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div></li></ul></li></ul> <h3 id="_4-2-使用步骤"><a href="#_4-2-使用步骤" class="header-anchor">#</a> 4.2 使用步骤</h3> <ul><li><p>初始化bitmap</p> <p>布隆过滤器 本质上 是由长度为 m 的位向量或位列表（仅包含 0 或 1 位值的列表）组成，最初所有的值均设置为 0</p> <p><img src="https://cdn.jsdelivr.net/gh/clxmm/image/img/2024/09/redis202409232155986.png" alt=""></p></li> <li><p>添加占坑位</p> <p>当我们向布隆过滤器中添加数据时，为了尽量地址不冲突，会使用多个 hash 函数对 key 进行运算，算得一个下标索引值，然后对位数组长度进行取模运算得到一个位置，每个 hash 函数都会算得一个不同的位置。再把位数组的这几个位置都置为 1 就完成了 add 操作。</p> <p>例如，我们添加一个字符串wmyskxz，对字符串进行多次hash(key) → 取模运行→ 得到坑位</p></li> <li><p>判断是否存在</p> <p>向布隆过滤器查询某个key是否存在时，先把这个 key 通过相同的多个 hash 函数进行运算，查看对应的位置是否都为 1，</p> <p><strong>只要有一个位为零，那么说明布隆过滤器中这个 key 不存在；</strong></p> <p><strong>如果这几个位置全都是 1，那么说明极有可能存在；</strong></p> <p>因为这些位置的 1 可能是因为其他的 key 存在导致的，也就是前面说过的hash冲突。。。。。</p> <p>就比如我们在 add 了字符串wmyskxz数据之后，很明显下面1/3/5 这几个位置的 1 是因为第一次添加的 wmyskxz 而导致的；</p> <p>此时我们查询一个没添加过的不存在的字符串inexistent-key，它有可能计算后坑位也是1/3/5 ，这就是误判了......笔记见最下面</p> <p><img src="https://cdn.jsdelivr.net/gh/clxmm/image/img/2024/09/redis202409232156064.png" alt=""></p> <p><img src="https://cdn.jsdelivr.net/gh/clxmm/image/img/2024/09/redis202409232156409.png" alt=""></p></li></ul> <h3 id="_4-3-布隆过滤器误判率-为什么不要删除"><a href="#_4-3-布隆过滤器误判率-为什么不要删除" class="header-anchor">#</a> 4.3 布隆过滤器误判率，为什么不要删除</h3> <p>布隆过滤器的误判是指多个输入经过哈希之后在相同的bit位置1了，这样就无法判断究竟是哪个输入产生的，因此误判的根源在于相同的 bit 位被多次映射且置 1。</p> <p>这种情况也造成了布隆过滤器的删除问题，因为布隆过滤器的每一个 bit 并不是独占的，很有可能多个元素共享了某一位。</p> <p>如果我们直接删除这一位的话，会影响其他的元素</p> <p><strong>特性</strong></p> <p>布隆过滤器可以添加元素，但是不能删除元素。因为删掉元素会导致误判率增加。</p> <h3 id="_4-4-总结"><a href="#_4-4-总结" class="header-anchor">#</a> 4.4 总结</h3> <ul><li>是否存在
<ul><li>有，是很可能有</li> <li>无，是肯定无，100%无</li></ul></li> <li>使用时最好不要让实际元素数量远大于初始化数量，一次给够避免扩容</li> <li>当实际元素数量超过初始化数量时，应该对布隆过滤器进行重建，重新分配一个 size 更大的过滤器，再将所有的历史元素批量 add 进行</li></ul> <h2 id="_5-布隆过滤器的使用场景"><a href="#_5-布隆过滤器的使用场景" class="header-anchor">#</a> 5.布隆过滤器的使用场景</h2> <ul><li><p><strong>解决缓存穿透的问题，和redis结合bitmap使用</strong></p> <ul><li><p><em><strong>缓存穿透是什么</strong></em></p> <p>一般情况下，先查询缓存redis是否有该条数据，缓存中没有时，再查询数据库。</p> <p>当数据库也不存在该条数据时，每次查询都要访问数据库，这就是缓存穿透。</p> <p>缓存透带来的问题是，当有大量请求查询数据库不存在的数据时，就会给数据库带来压力，甚至会拖垮数据库。</p> <p><strong>可以使用布隆过滤器解决缓存穿透的问题</strong></p> <p>把已存在数据的key存在布隆过滤器中，相当于redis前面挡着一个布隆过滤器。</p> <p>当有新的请求时，先到布隆过滤器中查询是否存在：如果布隆过滤器中不存在该条数据则直接返回；如果布隆过滤器中已存在，才去查询缓存redis，如果redis里没查询到则再查询Mysql数据库</p> <p><img src="https://cdn.jsdelivr.net/gh/clxmm/image/img/2024/09/redis202409232202341.png" alt=""></p></li></ul></li> <li><p>黑名单校验，识别垃圾邮件</p></li> <li><p>安全连接网址，全球上10亿的网址判断</p></li></ul> <h2 id="_6-尝试手写布隆过滤器"><a href="#_6-尝试手写布隆过滤器" class="header-anchor">#</a> 6.尝试手写布隆过滤器，</h2> <p>结合bitmap类型手写一个简单的布隆过滤器，体会设计思想</p> <h3 id="_6-1-整体架构"><a href="#_6-1-整体架构" class="header-anchor">#</a> 6.1 整体架构</h3> <p><img src="https://cdn.jsdelivr.net/gh/clxmm/image/img/2024/09/redis202409232204083.png" alt=""></p> <h3 id="_6-2-设计步骤"><a href="#_6-2-设计步骤" class="header-anchor">#</a> 6.2 设计步骤</h3> <ul><li><p>redis的setbit/getbit</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>nps2-r:db<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;whitelistCustomer&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;customer:32781&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;customer:20912&quot;</span>
nps2-r:db<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> <span class="token builtin class-name">type</span> whitelistCustomer
string
nps2-r:db<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> getbit whitelistCustomer <span class="token number">12</span>
<span class="token number">0</span>
nps2-r:db<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> getbit whitelistCustomer <span class="token number">1772098755</span>
<span class="token number">1</span>
nps2-r:db<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/clxmm/image/img/2024/09/redis202409232205633.png" alt=""></p></li> <li><p>setBit的构建过程</p> <ul><li>@PostConstruct初始化白名单数据</li> <li>计算元素的hash值</li> <li>通过上一步hash值算出对应的二进制数组的坑位</li> <li>将对应坑位的值的修改为数字1，表示存在</li></ul></li> <li><p>getBit查询是否存在</p> <ul><li>计算元素的hash值</li> <li>通过上一步hash值算出对应的二进制数组的坑位</li> <li>返回对应坑位的值，零表示无，1表示存在</li></ul></li></ul> <h3 id="_6-3关键代码"><a href="#_6-3关键代码" class="header-anchor">#</a> 6.3关键代码</h3> <p><code>BloomFilterInit</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BloomFilterInit</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">RedisTemplate</span> redisTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@PostConstruct</span><span class="token comment">//初始化白名单数据，故意差异化数据演示效果......</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//白名单客户预加载到布隆过滤器</span>
        <span class="token class-name">String</span> uid <span class="token operator">=</span> <span class="token string">&quot;customer:12&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//1 计算hashcode，由于可能有负数，直接取绝对值</span>
        <span class="token keyword">int</span> hashValue <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>uid<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2 通过hashValue和2的32次方取余后，获得对应的下标坑位</span>
        <span class="token keyword">long</span> index <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>hashValue <span class="token operator">%</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>uid <span class="token operator">+</span> <span class="token string">&quot; 对应------坑位index:{}&quot;</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3 设置redis里面bitmap对应坑位，该有值设置为1</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setBit</span><span class="token punctuation">(</span><span class="token string">&quot;whitelistCustomer&quot;</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 2024-09-24T22:11:24.090+08:00  INFO 10052 --- [           main] org.clxmm.filter.BloomFilterInit         : customer:12 对应------坑位index:1772098755</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>util</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CheckUtils</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">RedisTemplate</span> redisTemplate<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">checkWithBloomFilter</span><span class="token punctuation">(</span><span class="token class-name">String</span> checkItem<span class="token punctuation">,</span> <span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> hashValue <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> index <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>hashValue <span class="token operator">%</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> existOK <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBit</span><span class="token punctuation">(</span>checkItem<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;-----&gt;key:&quot;</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">&quot;\t对应坑位index:&quot;</span> <span class="token operator">+</span> index <span class="token operator">+</span> <span class="token string">&quot;\t是否存在:&quot;</span> <span class="token operator">+</span> existOK<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> existOK<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>service</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">CheckUtils</span> checkUtils<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Customer</span> <span class="token function">findCustomerByIdWithBloomFilter</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> customerId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Customer</span> customer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token comment">//缓存key的名称</span>
        <span class="token class-name">String</span> key <span class="token operator">=</span> <span class="token constant">CACHE_KEY_CUSTOMER</span> <span class="token operator">+</span> customerId<span class="token punctuation">;</span>

        <span class="token comment">//布隆过滤器check，无是绝对无，有是可能有</span>
        <span class="token comment">//===============================================</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>checkUtils<span class="token punctuation">.</span><span class="token function">checkWithBloomFilter</span><span class="token punctuation">(</span><span class="token string">&quot;whitelistCustomer&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;白名单无此顾客信息:{}&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//===============================================</span>

        <span class="token comment">//1 查询redis</span>
        customer <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Customer</span><span class="token punctuation">)</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//redis无，进一步查询mysql</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>customer <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//2 从mysql查出来customer</span>
            customer <span class="token operator">=</span> customerMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>customerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// mysql有，redis无</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>customer <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//3 把mysql捞到的数据写入redis，方便下次查询能redis命中。</span>
                redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> customer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> customer<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>参数12时</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>2024-09-24T22:11:40.603+08:00  INFO 10052 --- [nio-8000-exec-2] org.clxmm.util.CheckUtils                : -----&gt;key:customer:12	对应坑位index:1772098755	是否存在:true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>结果</strong></p> <ul><li>布隆过滤器有，redis有</li> <li>布隆过滤器有，redis无</li> <li>布隆过滤器无，直接返回，不再继续走下去</li></ul> <h2 id="_7-布隆过滤器优缺点"><a href="#_7-布隆过滤器优缺点" class="header-anchor">#</a> 7.布隆过滤器优缺点</h2> <ul><li><p>有点</p> <ul><li>高效地插入和查询，内存占用bit空间少</li></ul></li> <li><p>缺点</p> <ul><li>不能删除元素。</li> <li>因为删掉元素会导致误判率增加，因为hash冲突同一个位置可能存的东西是多个共有的，你删除一个元素的同时可能也把其它的删除了。</li> <li>存在误判，不能精准过滤
<ul><li>有，是很可能有</li> <li>无，是肯定无，<code>100%无</code></li></ul></li></ul></li></ul></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/clxmm/clxmm/edit/master/docs/01.后端学习/10.redis/14.布隆过滤器BloomFilter.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=redis" title="标签">#redis</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/09/24, 22:41:00</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/8249db/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">13案列bitmap-hyperlog-geo</div></a> <a href="/pages/cdc2c8/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">缓存预热、雪崩、击穿、穿透</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/8249db/" class="prev">13案列bitmap-hyperlog-geo</a></span> <span class="next"><a href="/pages/cdc2c8/">缓存预热、雪崩、击穿、穿透</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/910977/"><div>
            vue3
            <!----></div></a> <span class="date">01-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/109f3c/"><div>
            vue学习
            <!----></div></a> <span class="date">12-21</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/7f2831/"><div>
            01vue学习
            <!----></div></a> <span class="date">11-27</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2024-2025
    <span>Evan Xu | <a href="https://github.com/clxmm" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.bb793d44.js" defer></script><script src="/assets/js/2.c9184447.js" defer></script><script src="/assets/js/3.b86c239d.js" defer></script><script src="/assets/js/24.98b533de.js" defer></script>
  </body>
</html>
